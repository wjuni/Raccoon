var dbg_openmenu;
jQuery(function(b){function u(g){e=new naver.maps.Map(g,{center:v,scrollWheel:!1,mapDataControl:!1,zoomControl:!0,zoomControlOptions:{style:naver.maps.ZoomControlStyle.SMALL,position:naver.maps.Position.TOP_RIGHT},disableDoubleClickZoom:!0,zoom:12});(new naver.maps.CustomControl('<a href="#" class="btn_mylct" onclick="return false;" id="btn_current_loc"><span class="spr_trff spr_ico_mylct">Current Location</span></a>',{position:naver.maps.Position.TOP_LEFT})).setMap(e);naver.maps.Event.addListener(e,"click",
function(a){"Target"===r&&(null===d?d=new naver.maps.Marker({position:a.coord,map:e}):d.setPosition(a.coord))});naver.maps.Event.addListener(e,"dragstart",function(a){l=!1;b("#btn_current_loc").addClass("grayscale")});b("#btn_current_loc").on("click",function(a){null!==h&&e.setCenter(h);l=!0;b("#btn_current_loc").removeClass("grayscale")})}function w(){b("#item_dashboard").show();p=function(a){for(var c in a)a.hasOwnProperty(c)&&b("#dash_"+c).html(a[c]);t&&(b(".counter").counterUp({delay:50,time:800}),
t=!1)};var e=function(){b("#sparklinedash").sparkline([0,5,6,10,9,12,4,9],{type:"bar",height:"30",barWidth:"4",resize:!0,barSpacing:"5",barColor:"#7ace4c"});b("#sparklinedash2").sparkline([0,5,6,10,9,12,4,9],{type:"bar",height:"30",barWidth:"4",resize:!0,barSpacing:"5",barColor:"#7460ee"});b("#sparklinedash3").sparkline([0,5,6,10,9,12,4,9],{type:"bar",height:"30",barWidth:"4",resize:!0,barSpacing:"5",barColor:"#11a0f8"})},a;b(window).on("resize",function(b){clearTimeout(a);a=setTimeout(e,500)});e()}
function x(){function g(){var a=b("#opt_dist_num"),c=parseInt(a.val()),g=parseInt(a.attr("max")),d=parseInt(a.attr("min"));c>g&&(c=g);if(isNaN(c)||c<d)c=d;a.val(c);null!==f&&(f.setMap(null),f=null);null!==h&&(f=new naver.maps.Circle({map:e,center:h,radius:c,strokeColor:"yellowgreen",strokeOpacity:1,strokeWeight:3,fillColor:"yellowgreen",fillOpacity:.3}))}b("#item_control").show();b("#btn_start").click(function(a){a=b(this);var c=b("#loader_information");"Start"===a.html()?(c.show(),c.html("Starting Task..."),
b(".preloader").show(),setTimeout(function(){b(".preloader").fadeOut()},1E3),a.html("Stop"),a.removeClass("btn-success"),a.addClass("btn-danger"),q=!0):(c.show(),c.html("Stopping Task..."),b(".preloader").show(),setTimeout(function(){b(".preloader").fadeOut()},1E3),a.html("Start"),a.removeClass("btn-danger"),a.addClass("btn-success"),q=!1);b(".btn_options").prop("disabled",q)});b("#btn_line").click(function(a){a=b(this);"1 Line"===a.html()?a.html("2 Lines"):a.html("1 Line")});b("#btn_color").click(function(a){a=
b(this);"Yellow"===a.html()?(a.html("White"),a.removeClass("btn-warning")):(a.html("Yellow"),a.addClass("btn-warning"))});b("#btn_recovery").click(function(a){a=b(this);"Recovery"===a.html()?a.html("Inspection"):a.html("Recovery")});b(".btn_term_cond").click(function(a){b(".btn_term_cond").removeClass("btn-primary");a=b(this);a.addClass("btn-primary");b(".opt").hide();b("."+b(this).attr("id")).show();r=a.html();null!==d&&("Target"!==a.html()?d.setMap(null):d.setMap(e));null!==f&&(f.setMap(null),f=
null);"Distance"===a.html()&&g()});b("#opt_dist_num").on("change",g);p=function(a){b("#btn_status").html(a.status+" (GPS:"+a.gps+")")}}var e,r="Nonstop",q=!1,v=new naver.maps.LatLng(36.373465,127.359998),h=null,d=null,f=null,k=null,l=!0,p=function(){},t=!0,m=!1;b(document).ready(function(){function g(n){n.matches?a():(b(".menu_background").addClass("hidden"),n=b(".sidebar"),n.css("left","0"),n.css("width","240px"),m=!1)}function a(){if(d.matches){b(".menu_background").addClass("hidden");var a=b(".sidebar");
a.css("width","0");a.css("left","-240px");m=!1}}u("naver-map");b(".left_menu").on("click",function(){location.reload()});if("onhashchange"in window)window.onhashchange=function(){console.log(window.location.hash);location.reload()};else{var c=window.location.hash;window.setInterval(function(){window.location.hash!==c&&(c=window.location.hash,console.log(c),location.reload())},100)}var d=window.matchMedia("(max-width: 1170px)");d.addListener(g);g(d);b(".menu_background").click(a);b(".logo-a").click(function(){if(m)a();
else if(d.matches){var c=b(".sidebar");c.css("width","240px");c.css("transition",".3s ease-in");b(".menu_background").removeClass("hidden");c.css("left","0");m=!0}});var f=window.location.hash.substr(1);""===f&&(location.replace("#dashboard"),location.reload());"dashboard"===f?w():"control"===f&&x();b.post("ajax/fetch_dashboard.php",function(a){JSON.parse(a)});setInterval(function(){b.post("ajax/fetch_dashboard.php",function(a){a=JSON.parse(a);p(a);0<a.lat&&0<a.lng?(h=new naver.maps.LatLng(a.lat,
a.lng),l&&e.setCenter(h),null===k?(a={position:h,map:e,icon:{url:"images/current_location.png",size:new naver.maps.Size(80,80),origin:new naver.maps.Point(0,0),anchor:new naver.maps.Point(8,8),scaledSize:new naver.maps.Size(16,16)}},k=new naver.maps.Marker(a),l=!0,b("#btn_current_loc").removeClass("grayscale")):k.setPosition(h)):(k.setMap(null),h=k=null)})},1E3)})});
